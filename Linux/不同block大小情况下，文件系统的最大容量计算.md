 
 
在操作系统中，文件系统都是针对分区而言的，一个磁盘必须先分区才能格式化文件系统(即使你将磁盘所有容量划分一个分区).格式文件系统后才能挂载使用，此时就必须知道一个文件系统到底支持多大的分区大小。

### 在ext2、ext3文件系统中，采用32bit的块索引空间，且其采用int的无符号整型，因此

- ##### 当block为4KiB时，一个分区的最大空间为：2^32*8KByte=32TiB

- ##### 当block为4KiB时，一个分区的最大空间为：2^32*4KByte=16TiB

- ##### 当block为2KiB时，一个分区的最大空间为：2^32*2KByte=8TiB

- ##### 当block为1KiB时，一个分区的最大空间为：2^32*1KByte=4TiB,但ext2文件系统本身的限制，ext2文件系统限制单个文件最大容量为2TiB



#### 因此下表描述了ext2文件系统 block 大小与文件系统最大容量的关系：

|Block大小|1KB|2KB|4KB|8KB|
|:--|:--|:--|:--|:--|
|文件系统的最大容量|2TiB/4TiB ^[(1).取决于linux操作系统对文件系统的实现， 虽然都是ext2文件系统， 但是各个版本之间有可能会有差异</br> (2).具体的代码实现当中， 文件系统对应的描述信息和文件实际存储的大小，是不一样的。有的可能使用1K的描述符信息，描述4GiB的文件;有的可能使用1K的描述符信息，描述2G的文件 </br></br>**ext2的文件系统的最大容量请参考：**</br><a href="https://www.cnblogs.com/caiyao/articles/4606638.html">博客园--文件系统的最大容量</a></br><a href="https://www.linuxidc.com/Linux/2019-08/159814.htm">Linux EXT2 文件系统详解--Data block</a>]|8TB|16TB|32TB|

---

###  ext4使用48bit的块地址索引空间

- ##### 当block为8KiB时，一个分区的最大空间为：2^48*8KByte = 2048*1024TiB = 2EiB

- ##### 当block为4KiB时，一个分区的最大空间为：2^48*4KByte = 1024*1024TiB = 1EiB

- ##### 当block为2KiB时，一个分区的最大空间为：2^48*2KByte = 512*1024TiB = 0.5EiB

- ##### 当block为1KiB时，一个分区的最大空间为：2^48*1KByte = 256*1024TiB = 0.25EiB

> 1TB = 2^30KB

#### 因此下表描述了ext2文件系统 block 大小与文件系统最大容量的关系：

|Block大小|1KiB|2KiB|4KiB|8KiB|
|:--|:--|:--|:--|:--|
|文件系统的最大容量|0.25EiB|0.5EiB|1EiB|2EiB|
