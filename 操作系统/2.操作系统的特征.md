<font size = 4 face = "黑体">

#### 并发

##### 并发的概念

并发:指两个或多个事件在同一时间间隔内发生。这些事件宏观上是同时发生的，但微观上是交替发生的。常考易混概念――并行:指两个或多个事件在同一时刻同时发生。

操作系统的并发性指计算机系统中同时存在着多个运行着的程序。


在单核处理机中，一个时刻只会有一个进制在运行，因此操作系统会负责协调多个程序交替执行，所有处于就绪态的进程是以时间片为单位轮询运行的，哪个进程拿到时间片就运行，微观上是交替运行的，从用户角度宏观的角度观察，所有的进程好像是同时发生的。

###### 一个小知识点

事实上，操作系统就是伴随着“多道程序技术”而出现的。因此,
**操作系统和程序并发是一起诞生的**。

当今的计算机，一般都是多核CPU，比如2020年最新的i9-11900K处理器就是8核CPU这意味着同一时刻可以有8个程序并行执行，但是操作系统的并发性依然必不可少，当代人使用计算加上操作系统本身后台运行的进程和用户的进程绝对有8个以上的程序需要同时工作，再看一个极端情况著名厂商AMD有一个线程撕裂者3990X处理器，全球首款发烧级64核处理器，操作系统本身就有很多守护进程在后台运行为用户提供服务，再加上用户启动的进程，总有超过64个的时候，而且像3990x这样昂贵的耗电量巨大的桌面级处理器不是人人都能买得起用得上的，而且还得考虑移动端削弱版的处理器，因此在多核心处理机上并发是有存在必要性的。

---

#### 共享

共享即资源共享，是指系统中的资源可供内存中多个并发执行的进程共同使用。


资源共享方式总共有两种：互斥共享和同时共享

##### 互斥共享

系统中的某些资源，一个时间段内只允许一个进程访问

###### 举个栗子：同时使用QQ和微信视频，摄像头本身是一种互斥资源，同一时间段摄像头只运行分配给一个进程



##### 同时共享

系统中的某些资源，一个时间段内由多个个进程"同时"对它们进行访问，"同时"是宏观上的，实际上微观上是交替的访问，即分时共享

###### 举个栗子：使用QQ发送文件A，同时使用微信发送文件B。宏观上看，两边都在同时读取并发送文件，说明两个进程都在访问硬盘资源，从中读取数据。微观上看，两个进程是交替着访问硬盘的。



注意：**低速设备是分时占用，但是播放音乐不是**，大概过程是多个程序输出音频到系统驱动，系统驱动把他们混合在一起，再按照声卡要求发出去。

在有的windows电脑上，可以同时用两个音乐播放软件播放不同的音乐会出现混音，而有的windows电脑做不到，这实际上和音乐播放程序有关的不支持混响的音乐播放程序之间就不能同时输出音频



---

#### 并发和共享的关系

并发性指计算机系统中同时存在着多个运行着的程序。

共享性是指系统中的资源可供内存中多个并发执行的进程共同使用。

如果失去并发性共享性就失去了意义，如果失去了共享性很多并发事件就不能实现


---

#### 虚拟技术

虚拟是指把一个物理上的实体变为若干个逻辑上的对应物。物理实体（前者）是实际存在的，而逻辑上对应物（后者）是用户感受到的。

##### 空分复用技术

举个栗子：

> 背景知识:一个程序需要放入内存并给它分配CPU才能执行

3A巨作动辄几十上百GB，比如GTA5它们是如何放入远远小于游戏总大小的内存中的？又是如何运行的？

虚拟存储技术使得以上成为可能————虚拟存储技术中的“空分复用技术“

##### 时分复用技术

在单核CPU计算机中，用户同时打开多个应用程序，所有的进程是怎么同时运行的？

虚拟技术中的“时分复用技术”。微观上处理机在各个微小的时间段内交替着为各个进程服务



---

#### 异步

异步是指，在多道程序环境下，允许多个程序并发执行，但由于资源有限，进程的执行不是一贯到底的,而是走走停停，以不可预知的速度向前推进，这就是进程的异步性。


导致异步性的原因就是，系统的资源是有限的，进程运行需要的某些资源得不到满足进程就会阻塞等待，进入阻塞队列，直到运行需要得所有资源的到满足才会进入就绪队列直到拿到处理机的时间片才会运行。


#### 总结：

并发和共享互为存在条件
没有并发和共享，就谈不上虚拟和异步，因此并发和共享是操作系统的两个最基本的特征


</font>