<font size = 4 face = "黑体">


<img src="https://img-blog.csdnimg.cn/20201220171823580.png" />


观看<a href="https://blog.csdn.net/qq_43808700/article/details/111316778?utm_source=app">1.操作系统</a>博文可知，操作系统作为用户和计算机硬件之间的接口，需要向上提供一些简单易用的服务。主要包括<font color ="#00FF00">命令接口</font>和<font color ="#00FF00">程序接口</font>。其中，程序接口由一组系统调用组成。

#### 系统调用


如果用户程序可以随意的访问共享资源，那么便有可能造成不可预知的错误。操作系统提供“系统调用”功能，用户进程想要使用打印机这种共享资源，只能通过系统调用向操作系统发出请求。操作系统会对各个请求进行协调管理。

###### 概念和作用


“系统调用”是操作系统提供给应用程序（程序员/编程人员）使用的接口，可以理解为一种可供应用程序调用的特殊函数，应用程序可以发出系统调用请求来获得操作系统的服务。


应用程序通过系统调用请求操作系统的服务。系统中的各种共享资源都由操作系统统一掌管，因此在用户程序中，凡是与资源有关的操作（如存储分配、/O操作、文件管理等），都必须通过系统调用的方式向操作系统提出服务请求，由操作系统代为完成。这样可以保证系统的稳定性和安全性，防止用户进行非法操作。


###### 分类

<img src="https://img-blog.csdnimg.cn/20201220165446546.png" width="800"/>

---

#### 系统调用和库函数的区别

应用程序是可以通过汇编语言直接使用系统调用接口的，现在的软件工程开发几乎都使用的是高级语言，会直接去调用库函数，而库函数底层也是封装了系统调用，对用户来说底层实现细节是透明的

<img src="https://img-blog.csdnimg.cn/20201220170003436.png" width="800"/>


---

#### 系统调用的过程


高级语言通过编译形成汇编语言，操作系统相关系统调用程序根据用户提供的参数进行系统调用的处理

<img src="https://img-blog.csdnimg.cn/2020122017040253.png" width="800"/>

系统调用是通过访管指令来区分的 ^[比如linux之下的系统调用号：<img src="https://img-blog.csdnimg.cn/20201220170915490.png" width="800"/>]

<img src="https://img-blog.csdnimg.cn/20201220170727373.png" width="800"/>


系统调用过程：传递系统调用参数→执行陷入指令(用户态）→执行系统调用相应服务程序（核心态）→返回用户程序

注意:

1.陷入指令是在用户态执行的，执行陷入指令之后立即引发一个内中断，从而CPU进入核心态

2.发出系统调用请求是在用户态，而对系统调用的相应处理在核心态下进行

3.陷入指令是唯一一个只能在用户态执行，而不可在核心态执行的指令 ^[换言之，核心态既可以执行特权指令又可以执行非特权指令，但核心态唯一不能执行的非特权指令就是陷入指令]



</font>