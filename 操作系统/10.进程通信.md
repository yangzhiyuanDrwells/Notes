<font size = 4 face = "黑体">



<img src="https://img-blog.csdnimg.cn/2020123016454840.png">


#### 什么是进程通信

顾名思义，进程通信就是指进程之间的信息交换。

进程是分配系统资源的单位（包括内存地址空间)，因此各进程拥有的内存地址空间相互独立。为了保证安全，一个进程不能直接访问另一个进程的地址空间。进程之间的信息交换是必须实现的，因此操作系统提供了一些方法



<img src="https://img-blog.csdnimg.cn/20201230162905717.png" width="400">

---

---

<img src="https://img-blog.csdnimg.cn/20201230165333673.png" height="10" />

#### 共享存储


提供一块共享空间，两个进程都可以访问，但是两个进程对共享空间的访问必须是互斥的(互斥访问是通过操作系统提供的工具实现的，操作系统只会提供共享空间和互斥工具(p,v操作))

<img src="https://img-blog.csdnimg.cn/20201230163311808.png"  width="500">

##### 基于数据结构的共享

比如共享空间里只能放一个长度为10的数组。这种共享方式速度慢、限制多，是一种低级通信方式


##### 基于存储区的共享

在内存中画出一块共享存储区，数据的形式、存放位置都由进程控制，而不是操作系统。相比之下，这种共享方式速度更快，是一种高级通信方式。

---

<img src="https://img-blog.csdnimg.cn/20201230165333673.png" height="5" />

#### 消息传递


进程间的数据交换以格式化的消息（Message）为单位。进程通过操作系统提供的“发送消息/接收消息”两个原语进行数据交换。

格式化的消息包括消息头和消息体

> 消息头包括:发送进程ID、接受进程ID、消息类型、消息长度等格式化的信息（计算机网络中发送的“报文”其实就是一种格式化的消息)



<img src="https://img-blog.csdnimg.cn/20201230164803590.png"  width="700">


###### 直接通信方式

每个进程有一个消息缓冲队列，发送消息的进程通过发送原语将消息发送给另一个进程，接收的进程便会将消息挂到消息队列尾，同时接收的进程通过接收消息原语对消息进行处理使用


###### 间接通信方式

消息要先发送到中间实体（信箱）中，因此也称“信箱通信方式”。Eg:计网中的电子邮件系统

发送消息的进程通过发送原语将消息发送到信箱中，接收的进程便会通过接收消息原语对消息进行取走处理使用

---

<img src="https://img-blog.csdnimg.cn/20201230165333673.png" height="5" />

#### 管道通信


“管道”是指用于连接读写进程的一个共享文件，又名pipe文件。其实就是在内存中开辟一个大小固定的缓冲区

1、管道只能采用半双工通信，某一时间段内只能实现单向的传输。如果要实现双向同时通信，则需要设置两个管道。


2、各进程要互斥地访问管道。


3、数据以字符流的形式写入管道，当管道写满时，写进程的write()系统调用将被阻塞，等待读进程将数据
取走。当读进程将数据全部取走后，管道变空，此时读进程的read()系统调用将被阻塞。


4、如果没写满，就不允许读。如果没读空，就不允许写。


5、数据一旦被读出，就从管道中被抛弃，这就意味着读进程最多只能有一个，否则可能会有读错数据的情
况。




</font>